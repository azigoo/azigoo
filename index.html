<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tienda Nova Pro</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{background:#eef2f7;color:#333;transition:background 0.3s, color 0.3s;}
html{font-size: clamp(14px, 1.2vw, 18px);}

/* MODO OSCURO */
body.dark-mode{background:#1a1a2e;color:#eee;}
body.dark-mode .card{background:#16213e;color:#eee;}
body.dark-mode header{background:linear-gradient(120deg,#0a0a0a,#1a1a2e,#16213e);}
body.dark-mode nav{background:#0f0f1e;}
body.dark-mode .search-bar input{background:#2a2a3e;color:#eee;border-color:#444;}
body.dark-mode .hero{color:#fff;}
body.dark-mode footer{background:#0f0f1e;}
body.dark-mode .calendar{background:#2a2a3e;}
body.dark-mode .day{background:#16213e;color:#eee;}
body.dark-mode .store-card{background:#16213e;color:#eee;}

/* HEADER */
header{
    background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);
    color:white;
    padding:30px 5%;
    text-align:center;
}

/* NAV */
nav{
    background:#142d4c;
    display:flex;
    justify-content:center;
    gap:30px;
    padding:15px;
    flex-wrap:wrap;
}
nav a{
    color:white;
    text-decoration:none;
    font-weight:600;
    cursor:pointer;
}
nav a:hover{color:#ffd166}

/* WIDGET BUSCADOR */
.search-bar{
    text-align:center;
    margin:15px;
}
.search-bar input{
    padding:10px;
    width:60%;
    border-radius:6px;
    border:1px solid #ccc;
}

/* CONTENIDO */
.container{
    width:90%;
    max-width:1400px;
    margin:auto;
}

.hero{
    margin:20px 0;
    border-radius:12px;
    background:url('https://images.unsplash.com/photo-1492724441997-5dc865305da7') center/cover;
    height:320px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    font-size:2.2rem;
    text-shadow:2px 2px 8px black;
}

/* PRODUCTOS */
.products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:25px;
    margin:40px 0;
}

.card{
    background:white;
    border-radius:12px;
    box-shadow:0 6px 15px rgba(0,0,0,.1);
    overflow:hidden;
    transition:.3s;
    display:flex;
    flex-direction:column;
}
.card:hover{transform:translateY(-6px);}
.card img{width:100%;height:200px;object-fit:cover;}
.card-body{padding:20px;flex:1;display:flex;flex-direction:column;}
.price{margin:10px 0;color:#2a9d8f;font-weight:bold;}
button{
    margin-top:auto;
    padding:12px;
    border:none;
    background:#203a43;
    color:white;
    border-radius:6px;
    cursor:pointer;
}
button:hover{background:#162833}

/* WIDGET CARRITO */
.cart-widget{
    position:fixed;
    top:20px;
    right:20px;
    background:#ffd166;
    padding:10px 15px;
    border-radius:50px;
    font-weight:bold;
    box-shadow:0 4px 10px rgba(0,0,0,.2);
    z-index:1000;
}

/* WIDGET CHAT */
.chat-widget{
    position:fixed;
    bottom:20px;
    right:20px;
    background:#2a9d8f;
    color:white;
    padding:12px 18px;
    border-radius:50px;
    cursor:pointer;
    z-index:1000;
}

/* WIDGET MODO OSCURO */
.dark-mode-widget{
    position:fixed;
    top:80px;
    right:20px;
    background:#6c5ce7;
    color:white;
    padding:10px 15px;
    border-radius:50px;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,.2);
    z-index:1000;
    font-weight:bold;
}
.dark-mode-widget:hover{background:#5f4dd4;}

/* WIDGET FILTRO PRECIO */
.price-filter-widget{
    position:fixed;
    top:140px;
    right:20px;
    background:#ff6b6b;
    color:white;
    padding:12px 15px;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,.2);
    z-index:1000;
    min-width:200px;
}
.price-filter-widget h4{margin-bottom:8px;font-size:0.9rem;}
.price-filter-widget select{
    width:100%;
    padding:6px;
    border-radius:6px;
    border:none;
    font-size:0.85rem;
}

/* WIDGET VOLVER ARRIBA */
.scroll-top-widget{
    position:fixed;
    bottom:80px;
    right:20px;
    background:#f39c12;
    color:white;
    width:50px;
    height:50px;
    border-radius:50%;
    display:none;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,.2);
    z-index:1000;
    font-size:1.5rem;
}
.scroll-top-widget:hover{background:#e67e22;}
.scroll-top-widget.show{display:flex;}

/* CONTADOR OFERTA */
.countdown{
    text-align:center;
    background:#ff595e;
    color:white;
    padding:10px;
    font-weight:bold;
    border-radius:8px;
    margin:15px 0;
}

/* ========== CALENDARIO ========== */
.calendar-section{
    background:white;
    border-radius:12px;
    padding:25px;
    margin:30px 0;
    box-shadow:0 6px 15px rgba(0,0,0,.1);
}

.calendar-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:20px;
}
.calendar-header h2{color:#203a43;}
.calendar-nav{
    display:flex;
    gap:10px;
}
.calendar-nav button{
    background:#203a43;
    color:white;
    border:none;
    padding:8px 15px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
}
.calendar-nav button:hover{background:#162833;}

.calendar{
    background:#f8f9fa;
    border-radius:12px;
    padding:15px;
}

.calendar-weekdays{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:5px;
    margin-bottom:10px;
}
.weekday{
    text-align:center;
    font-weight:bold;
    color:#203a43;
    padding:10px 0;
    font-size:0.9rem;
}

.calendar-days{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:5px;
}

.day{
    aspect-ratio:1;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:8px;
    cursor:pointer;
    transition:.2s;
    position:relative;
    background:white;
    font-size:0.9rem;
}
.day:hover{background:#e3e8ff;transform:scale(1.05);}
.day.other-month{color:#ccc;}
.day.today{
    background:#ffd166;
    color:#203a43;
    font-weight:bold;
}
.day.promo::after{
    content:'üéÅ';
    position:absolute;
    bottom:2px;
    font-size:0.7rem;
}

.promo-info{
    margin-top:20px;
    background:#fff3cd;
    padding:15px;
    border-radius:8px;
    border-left:4px solid #ffd166;
}
.promo-info h3{color:#856404;margin-bottom:10px;}

/* ========== MAPA ========== */
.map-section{
    background:white;
    border-radius:12px;
    padding:25px;
    margin:30px 0;
    box-shadow:0 6px 15px rgba(0,0,0,.1);
}

.map-section h2{color:#203a43;margin-bottom:20px;}

#map{
    height:400px;
    border-radius:12px;
    box-shadow:0 4px 15px rgba(0,0,0,.1);
    margin-bottom:20px;
}

.stores-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:15px;
}

.store-card{
    background:#f8f9fa;
    padding:15px;
    border-radius:10px;
    cursor:pointer;
    transition:.2s;
    border-left:4px solid #203a43;
}
.store-card:hover{
    background:#e3e8ff;
    transform:translateX(5px);
}
.store-card h4{color:#203a43;margin-bottom:8px;}
.store-card p{color:#666;font-size:0.9rem;margin:5px 0;}
.store-card .tag{
    display:inline-block;
    background:#203a43;
    color:white;
    padding:3px 10px;
    border-radius:12px;
    font-size:0.75rem;
    margin-top:5px;
}

footer{
    background:#142d4c;
    color:white;
    text-align:center;
    padding:20px;
    margin-top:40px;
}
</style>
</head>

<body>

<div class="cart-widget">üõí Carrito: <span id="cartCount">0</span></div>
<div class="chat-widget" onclick="alert('Hola üëã ¬øEn qu√© podemos ayudarte?')">üí¨ Ayuda</div>

<!-- WIDGETS -->
<div class="dark-mode-widget" onclick="toggleDarkMode()">üåô Modo Oscuro</div>

<div class="price-filter-widget">
    <h4>üí∞ Filtrar por precio</h4>
    <select id="priceFilter" onchange="aplicarFiltro()">
        <option value="todos">Todos los precios</option>
        <option value="bajo">Menos de $5,000</option>
        <option value="medio">$5,000 - $15,000</option>
        <option value="alto">M√°s de $15,000</option>
    </select>
</div>

<div class="scroll-top-widget" id="scrollTop" onclick="volverArriba()">
    ‚Üë
</div>

<header>
    <h1>Tienda Nova Pro</h1>
    <p>Tecnolog√≠a y accesorios al mejor precio</p>
</header>

<nav>
    <a onclick="mostrar('inicio')">Inicio</a>
    <a onclick="mostrar('productos')">Productos</a>
    <a onclick="mostrar('ofertas')">Ofertas</a>
    <a onclick="mostrar('tiendas')">Tiendas</a>
    <a onclick="mostrar('contacto')">Contacto</a>
</nav>

<div class="search-bar">
    <input type="text" placeholder="üîç Buscar producto..." onkeyup="buscar(this.value)">
</div>

<div id="app" class="container"></div>

<footer>
    ¬© 2026 Tienda Nova Pro
</footer>

<script>
let carrito = 0;
let modoOscuro = false;
let todosLosProductos = [];
let mapa;
let marcadores = [];

// CALENDARIO
let mesActual = new Date().getMonth();
let a√±oActual = new Date().getFullYear();
const meses = ['Enero','Febrero','Marzo','Abril','Mayo','Junio',
               'Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];

// D√≠as con promociones especiales
const promosDias = {
    '2026-02-14': {titulo: 'San Valent√≠n üíï', desc: '20% descuento en aud√≠fonos y accesorios'},
    '2026-02-20': {titulo: 'Flash Sale ‚ö°', desc: '30% en productos seleccionados'},
    '2026-02-28': {titulo: 'Fin de Mes üéâ', desc: 'Env√≠o gratis en todas las compras'}
};

// PRODUCTO MEJORADO CON PRECIO NUM√âRICO
function producto(titulo, desc, precio, precioNum, img){
    return {titulo, desc, precio, precioNum, img};
}

// BASE DE DATOS DE PRODUCTOS
const productosDB = [
    producto("Laptop Ultra","M√°xima potencia para profesionales.","$21,999 MXN",21999,"https://images.unsplash.com/photo-1517336714731-489689fd1ca8"),
    producto("Smartphone Z","C√°mara premium y gran bater√≠a.","$11,499 MXN",11499,"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9"),
    producto("Tablet Plus","Ideal para estudiar.","$6,999 MXN",6999,"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0"),
    producto("Aud√≠fonos Pro","Sonido envolvente.","$1,799 MXN",1799,"https://images.unsplash.com/photo-1505740420928-5e560c06d30e"),
    producto("Monitor 4K","Resoluci√≥n incre√≠ble para dise√±o.","$8,999 MXN",8999,"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf"),
    producto("Teclado Mec√°nico","RGB personalizable.","$2,499 MXN",2499,"https://images.unsplash.com/photo-1587829741301-dc798b83add3")
];

// TIENDAS F√çSICAS
const tiendas = [
    {nombre: 'Nova Pro Centro', direccion: 'Av. Reforma 123, Centro', lat: 19.4326, lng: -99.1332, horario: '10:00 - 20:00', tel: '55-1234-5678'},
    {nombre: 'Nova Pro Polanco', direccion: 'Av. Masaryk 456, Polanco', lat: 19.4350, lng: -99.1900, horario: '11:00 - 21:00', tel: '55-8765-4321'},
    {nombre: 'Nova Pro Santa Fe', direccion: 'Centro Santa Fe, Cuajimalpa', lat: 19.3600, lng: -99.2600, horario: '10:00 - 22:00', tel: '55-5555-1234'},
    {nombre: 'Nova Pro Insurgentes', direccion: 'Av. Insurgentes Sur 789', lat: 19.3700, lng: -99.1700, horario: '09:00 - 20:00', tel: '55-9999-8888'}
];

function comprar(p){
    carrito++;
    document.getElementById("cartCount").innerText = carrito;
    alert("Producto agregado: " + p);
}

function card(titulo,desc,precio,img){
    return `
    <div class="card" data-precio="${precio}">
        <img src="${img}">
        <div class="card-body">
            <h3>${titulo}</h3>
            <p>${desc}</p>
            <div class="price">${precio}</div>
            <button onclick="comprar('${titulo}')">Agregar al carrito</button>
        </div>
    </div>`;
}

function mostrar(seccion){
    const app = document.getElementById("app");

    if(seccion === "inicio"){
        app.innerHTML = `
            <div class="hero">Descubre lo √∫ltimo en tecnolog√≠a</div>
            <div class="countdown">‚è∞ Oferta termina en: <span id="timer"></span></div>
            
            <h2>‚≠ê Productos Destacados</h2>
            <div class="products" id="listaProductos">
                ${card(productosDB[0].titulo,productosDB[0].desc,productosDB[0].precio,productosDB[0].img)}
                ${card(productosDB[1].titulo,productosDB[1].desc,productosDB[1].precio,productosDB[1].img)}
            </div>

            <div class="calendar-section">
                <div class="calendar-header">
                    <h2 id="currentMonth">Febrero 2026</h2>
                    <div class="calendar-nav">
                        <button onclick="cambiarMes(-1)">‚óÄ Anterior</button>
                        <button onclick="cambiarMes(1)">Siguiente ‚ñ∂</button>
                    </div>
                </div>

                <div class="calendar">
                    <div class="calendar-weekdays">
                        <div class="weekday">Dom</div>
                        <div class="weekday">Lun</div>
                        <div class="weekday">Mar</div>
                        <div class="weekday">Mi√©</div>
                        <div class="weekday">Jue</div>
                        <div class="weekday">Vie</div>
                        <div class="weekday">S√°b</div>
                    </div>
                    <div class="calendar-days" id="calendarDays"></div>
                </div>

                <div class="promo-info">
                    <h3>üìÖ Pr√≥ximas Promociones Especiales</h3>
                    <div id="promosList"></div>
                </div>
            </div>

            <div class="map-section">
                <h2>üó∫Ô∏è Encuentra tu Tienda m√°s Cercana</h2>
                <div id="map"></div>
                <h3 style="margin-top:25px;color:#203a43;">Nuestras Sucursales</h3>
                <div class="stores-grid" id="storesList"></div>
            </div>
        `;
        iniciarContador();
        generarCalendario();
        mostrarProximasPromos();
        setTimeout(() => {
            inicializarMapa();
            mostrarListaTiendas();
        }, 100);
    }

    if(seccion === "productos"){
        app.innerHTML = `
            <h2>Nuestros Productos</h2>
            <div class="products" id="listaProductos"></div>
        `;
        cargarProductos();
    }

    if(seccion === "ofertas"){
        mostrar("inicio");
    }

    if(seccion === "tiendas"){
        mostrar("inicio");
    }

    if(seccion === "contacto"){
        app.innerHTML = `
            <h2>Contacto</h2>
            <p>Email: contacto@novapro.com</p>
            <p>Tel√©fono: +52 55 1234 5678</p>
            <p>Horario: Lunes a Viernes 9:00 - 18:00</p>
        `;
    }
}

function cargarProductos(){
    const lista = document.getElementById("listaProductos");
    lista.innerHTML = productosDB.map(p => 
        card(p.titulo, p.desc, p.precio, p.img)
    ).join('');
    todosLosProductos = productosDB;
}

function buscar(texto){
    if(texto.length < 2) return;
    alert("Buscando: " + texto);
}

function iniciarContador(){
    let tiempo = 3600;
    setInterval(()=>{
        let m = Math.floor(tiempo/60);
        let s = tiempo%60;
        const timerEl = document.getElementById("timer");
        if(timerEl){
            timerEl.innerText = `${m}m ${s}s`;
        }
        tiempo--;
        if(tiempo < 0) tiempo = 3600;
    },1000);
}

// TOGGLE MODO OSCURO
function toggleDarkMode(){
    modoOscuro = !modoOscuro;
    document.body.classList.toggle('dark-mode');
    const widget = document.querySelector('.dark-mode-widget');
    widget.innerHTML = modoOscuro ? '‚òÄÔ∏è Modo Claro' : 'üåô Modo Oscuro';
}

// FILTRO DE PRECIOS
function aplicarFiltro(){
    const filtro = document.getElementById('priceFilter').value;
    const lista = document.getElementById("listaProductos");
    
    if(!lista) return;
    
    let productosFiltrados = productosDB;
    
    if(filtro === 'bajo'){
        productosFiltrados = productosDB.filter(p => p.precioNum < 5000);
    } else if(filtro === 'medio'){
        productosFiltrados = productosDB.filter(p => p.precioNum >= 5000 && p.precioNum <= 15000);
    } else if(filtro === 'alto'){
        productosFiltrados = productosDB.filter(p => p.precioNum > 15000);
    }
    
    lista.innerHTML = productosFiltrados.map(p => 
        card(p.titulo, p.desc, p.precio, p.img)
    ).join('');
    
    if(productosFiltrados.length === 0){
        lista.innerHTML = '<p style="text-align:center;padding:40px;">No hay productos en este rango de precio</p>';
    }
}

// BOT√ìN VOLVER ARRIBA
function volverArriba(){
    window.scrollTo({top: 0, behavior: 'smooth'});
}

window.addEventListener('scroll', () => {
    const scrollBtn = document.getElementById('scrollTop');
    if(window.scrollY > 300){
        scrollBtn.classList.add('show');
    } else {
        scrollBtn.classList.remove('show');
    }
});

// ========== FUNCIONES DE CALENDARIO ==========
function generarCalendario(){
    const primerDia = new Date(a√±oActual, mesActual, 1).getDay();
    const diasEnMes = new Date(a√±oActual, mesActual + 1, 0).getDate();
    const diasMesAnterior = new Date(a√±oActual, mesActual, 0).getDate();
    
    document.getElementById('currentMonth').textContent = `${meses[mesActual]} ${a√±oActual}`;
    
    const container = document.getElementById('calendarDays');
    container.innerHTML = '';
    
    // D√≠as del mes anterior
    for(let i = primerDia - 1; i >= 0; i--){
        const dia = diasMesAnterior - i;
        const div = document.createElement('div');
        div.className = 'day other-month';
        div.textContent = dia;
        container.appendChild(div);
    }
    
    // D√≠as del mes actual
    const hoy = new Date();
    for(let dia = 1; dia <= diasEnMes; dia++){
        const div = document.createElement('div');
        div.className = 'day';
        div.textContent = dia;
        
        const fechaKey = `${a√±oActual}-${String(mesActual+1).padStart(2,'0')}-${String(dia).padStart(2,'0')}`;
        
        // Marcar d√≠a de hoy
        if(dia === hoy.getDate() && mesActual === hoy.getMonth() && a√±oActual === hoy.getFullYear()){
            div.classList.add('today');
        }
        
        // Marcar si tiene promo
        if(promosDias[fechaKey]){
            div.classList.add('promo');
            div.title = promosDias[fechaKey].titulo;
        }
        
        container.appendChild(div);
    }
    
    // Completar semana
    const totalCeldas = container.children.length;
    const celdasFaltantes = 42 - totalCeldas;
    for(let i = 1; i <= celdasFaltantes; i++){
        const div = document.createElement('div');
        div.className = 'day other-month';
        div.textContent = i;
        container.appendChild(div);
    }
}

function cambiarMes(direccion){
    mesActual += direccion;
    if(mesActual > 11){
        mesActual = 0;
        a√±oActual++;
    }
    if(mesActual < 0){
        mesActual = 11;
        a√±oActual--;
    }
    generarCalendario();
}

function mostrarProximasPromos(){
    const lista = document.getElementById('promosList');
    let html = '';
    
    for(let fecha in promosDias){
        const promo = promosDias[fecha];
        const [a√±o, mes, dia] = fecha.split('-');
        html += `<p><strong>${dia}/${mes}:</strong> ${promo.titulo} - ${promo.desc}</p>`;
    }
    
    lista.innerHTML = html;
}

// ========== FUNCIONES DE MAPA ==========
function inicializarMapa(){
    if(mapa) mapa.remove();
    
    // Crear mapa centrado en Ciudad de M√©xico
    mapa = L.map('map').setView([19.4326, -99.1332], 11);
    
    // Agregar capa de mapa
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors'
    }).addTo(mapa);
    
    // Agregar marcadores de tiendas
    marcadores = [];
    tiendas.forEach((tienda, idx) => {
        const icono = L.divIcon({
            className: 'custom-icon',
            html: `<div style="background:#203a43;width:35px;height:35px;border-radius:50%;border:3px solid #ffd166;box-shadow:0 2px 8px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;">${idx+1}</div>`,
            iconSize: [35, 35]
        });
        
        const marcador = L.marker([tienda.lat, tienda.lng], {icon: icono})
            .addTo(mapa)
            .bindPopup(`
                <b>${tienda.nombre}</b><br>
                ${tienda.direccion}<br>
                üìû ${tienda.tel}<br>
                üïê ${tienda.horario}
            `);
        
        marcadores.push(marcador);
    });
}

function mostrarListaTiendas(){
    const lista = document.getElementById('storesList');
    
    lista.innerHTML = tiendas.map((tienda, idx) => `
        <div class="store-card" onclick="centrarMapa(${idx})">
            <h4>üè™ ${tienda.nombre}</h4>
            <p>üìç ${tienda.direccion}</p>
            <p>üìû ${tienda.tel}</p>
            <p>üïê ${tienda.horario}</p>
            <span class="tag">Tienda ${idx+1}</span>
        </div>
    `).join('');
}

function centrarMapa(indice){
    const tienda = tiendas[indice];
    mapa.setView([tienda.lat, tienda.lng], 15);
    marcadores[indice].openPopup();
    window.scrollTo({top: 0, behavior: 'smooth'});
}

// INICIALIZACI√ìN
mostrar("inicio");
</script>

</body>
</html>